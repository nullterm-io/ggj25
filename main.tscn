[gd_scene load_steps=41 format=3 uid="uid://br4drfrtg214t"]

[ext_resource type="Script" uid="uid://bfd6xl8te5os7" path="res://main.gd" id="1_ig7tw"]
[ext_resource type="PackedScene" uid="uid://ddu6t7qlafpcn" path="res://scenes/level.tscn" id="1_kek77"]
[ext_resource type="Script" uid="uid://dg04y7w1hivxh" path="res://addons/markdownlabel/markdownlabel.gd" id="2_5vw27"]
[ext_resource type="PackedScene" uid="uid://s6me3k5y07ok" path="res://scenes/props/parts/square_crystal.tscn" id="2_dg77c"]
[ext_resource type="Script" uid="uid://iehobv84byc8" path="res://scripts/camera/camera.gd" id="2_efxa6"]
[ext_resource type="Script" uid="uid://bauebmivwi3up" path="res://scripts/effects/noise_shake.gd" id="3_dg77c"]
[ext_resource type="Script" uid="uid://ccj0i7dop1bxm" path="res://addons/markdownlabel/header_formats/h1_format.gd" id="3_kek77"]
[ext_resource type="PackedScene" uid="uid://bpfdnq2qyfol" path="res://scenes/props/parts/taller_crystal.tscn" id="3_vivmo"]
[ext_resource type="PackedScene" uid="uid://vmpid0g1e1ku" path="res://scenes/props/parts/tall_crystal.tscn" id="4_2cqfq"]
[ext_resource type="Script" uid="uid://5jol0dl8p1eh" path="res://addons/markdownlabel/header_formats/h2_format.gd" id="4_4c57u"]
[ext_resource type="Script" uid="uid://cqyn0ifcurywd" path="res://addons/markdownlabel/header_formats/h3_format.gd" id="5_efxa6"]
[ext_resource type="PackedScene" uid="uid://ditf0jo254fgr" path="res://scenes/props/parts/triangle_crystal.tscn" id="5_yaehf"]
[ext_resource type="Script" uid="uid://brk4auxrpli3h" path="res://addons/markdownlabel/header_formats/h4_format.gd" id="6_dg77c"]
[ext_resource type="PackedScene" uid="uid://dmdubbdp3m2m4" path="res://scenes/props/ai_virus.tscn" id="6_yaehf"]
[ext_resource type="Script" uid="uid://7taosnlfs16b" path="res://addons/markdownlabel/header_formats/h5_format.gd" id="7_ycdy4"]
[ext_resource type="Script" uid="uid://dm8sdt8bsdgn8" path="res://addons/markdownlabel/header_formats/h6_format.gd" id="8_w48qg"]
[ext_resource type="Material" uid="uid://ctj4wjxi4prxd" path="res://assets/materials/blood_particle_mat.tres" id="10_074og"]
[ext_resource type="PackedScene" uid="uid://b322uyw1p565i" path="res://scenes/bubble.tscn" id="16_2cqfq"]
[ext_resource type="AudioStream" uid="uid://cdpacvalaityb" path="res://assets/music/main_theme.wav" id="19_82xsv"]
[ext_resource type="AudioStream" uid="uid://dtitu3xn328a6" path="res://assets/sfx/heart_beat.ogg" id="19_cegan"]
[ext_resource type="PackedScene" path="res://scenes/game_over.tscn" id="19_ryguw"]
[ext_resource type="Script" uid="uid://bxww3vs403gsx" path="res://scripts/hart_beat.gd" id="21_getpj"]

[sub_resource type="Sky" id="Sky_7rgt5"]

[sub_resource type="Environment" id="Environment_cegan"]
sky = SubResource("Sky_7rgt5")
ambient_light_source = 2
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_energy = 2.0
glow_enabled = true
glow_levels/1 = 1.0
glow_levels/2 = 1.0
glow_levels/4 = 1.0
glow_normalized = true
glow_intensity = 0.5
glow_strength = 0.8
glow_blend_mode = 0
fog_mode = 1
fog_light_color = Color(0.146704, 0.00340711, 0.013618, 1)
fog_density = 1.0
volumetric_fog_enabled = true
volumetric_fog_density = 0.8
volumetric_fog_albedo = Color(0.171407, 0.0106124, 0.0106047, 1)
volumetric_fog_emission = Color(0.378232, 6.94888e-07, 3.1285e-07, 1)
volumetric_fog_emission_energy = 0.05

[sub_resource type="CameraAttributesPractical" id="CameraAttributesPractical_82xsv"]
dof_blur_far_enabled = true
dof_blur_far_distance = 80.0
dof_blur_far_transition = 148.29
dof_blur_near_enabled = true
dof_blur_near_distance = 0.5
dof_blur_near_transition = -1.0

[sub_resource type="Compositor" id="Compositor_getpj"]

[sub_resource type="Curve" id="Curve_ryguw"]
_data = [Vector2(0, 0.00497019), 0.0, 0.0, 0, 0, Vector2(0.498715, 0.993539), 0.0, 0.0, 0, 0, Vector2(0.997429, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_f1207"]
curve = SubResource("Curve_ryguw")

[sub_resource type="Curve" id="Curve_d13ii"]
_limits = [-1.0, 1.0, 0.0, 1.0]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_isxh3"]
curve = SubResource("Curve_d13ii")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_1u8w0"]
lifetime_randomness = 0.25
emission_shape_scale = Vector3(10, 10, 20)
emission_shape = 3
emission_box_extents = Vector3(1, 1, 1)
inherit_velocity_ratio = -1.375
direction = Vector3(1, 1, 100)
spread = 5.0
initial_velocity_min = 10.0
initial_velocity_max = 100.0
gravity = Vector3(0, 0, 0)
scale_min = 0.2
scale_max = 0.75
alpha_curve = SubResource("CurveTexture_f1207")
hue_variation_curve = SubResource("CurveTexture_isxh3")

[sub_resource type="SphereMesh" id="SphereMesh_0odxb"]
material = ExtResource("10_074og")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_f1207"]
transparency = 1
vertex_color_use_as_albedo = true
albedo_color = Color(1, 0.85098, 0.74902, 1)

[sub_resource type="SphereMesh" id="SphereMesh_lswn8"]
material = SubResource("StandardMaterial3D_f1207")
radius = 0.2
height = 0.4

[sub_resource type="Resource" id="Resource_vivmo"]
resource_local_to_scene = true
script = ExtResource("3_kek77")
font_size = 2.285
is_bold = false
is_italic = false
is_underlined = false
override_font_color = false
font_color = Color(1, 1, 1, 1)

[sub_resource type="Resource" id="Resource_2cqfq"]
resource_local_to_scene = true
script = ExtResource("4_4c57u")
font_size = 1.714
is_bold = false
is_italic = false
is_underlined = false
override_font_color = false
font_color = Color(1, 1, 1, 1)

[sub_resource type="Resource" id="Resource_yaehf"]
resource_local_to_scene = true
script = ExtResource("5_efxa6")
font_size = 1.428
is_bold = false
is_italic = false
is_underlined = false
override_font_color = false
font_color = Color(1, 1, 1, 1)

[sub_resource type="Resource" id="Resource_074og"]
resource_local_to_scene = true
script = ExtResource("6_dg77c")
font_size = 1.142
is_bold = false
is_italic = false
is_underlined = false
override_font_color = false
font_color = Color(1, 1, 1, 1)

[sub_resource type="Resource" id="Resource_cegan"]
resource_local_to_scene = true
script = ExtResource("7_ycdy4")
font_size = 1.0
is_bold = false
is_italic = false
is_underlined = false
override_font_color = false
font_color = Color(1, 1, 1, 1)

[sub_resource type="Resource" id="Resource_82xsv"]
resource_local_to_scene = true
script = ExtResource("8_w48qg")
font_size = 0.857
is_bold = false
is_italic = false
is_underlined = false
override_font_color = false
font_color = Color(1, 1, 1, 1)

[node name="WorldEnvironment" type="WorldEnvironment"]
environment = SubResource("Environment_cegan")
camera_attributes = SubResource("CameraAttributesPractical_82xsv")
compositor = SubResource("Compositor_getpj")

[node name="Level" parent="." instance=ExtResource("1_kek77")]
pipe_length = 20
angle_change_dist = 1
max_offset = 0.3
scroll_speed = 6.5
obstacle_scenes = Array[PackedScene]([ExtResource("2_dg77c"), ExtResource("3_vivmo"), ExtResource("4_2cqfq"), ExtResource("5_yaehf")])
enemies_scenes = Array[PackedScene]([ExtResource("6_yaehf")])

[node name="Bubble" parent="." instance=ExtResource("16_2cqfq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.20204, 0.0539159, 0)
slide_velocity = 5.0
jump_velocity = 5.0

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3)
fov = 90.0
script = ExtResource("2_efxa6")
tracking_player = NodePath("../Bubble")

[node name="NoiseShake" type="Node" parent="Camera3D"]
script = ExtResource("3_dg77c")

[node name="RedBloodParticles" type="GPUParticles3D" parent="Camera3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.69468, 0, -23.4485)
amount = 300
randomness = 1.0
local_coords = true
trail_lifetime = 0.57
process_material = SubResource("ParticleProcessMaterial_1u8w0")
draw_pass_1 = SubResource("SphereMesh_0odxb")

[node name="WhiteBloodParticles" type="GPUParticles3D" parent="Camera3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.38935, 0, -46.8969)
amount = 20
randomness = 1.0
trail_lifetime = 0.57
process_material = SubResource("ParticleProcessMaterial_1u8w0")
draw_pass_1 = SubResource("SphereMesh_lswn8")

[node name="IntroScreen" type="MarginContainer" parent="."]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 50
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 20
script = ExtResource("1_ig7tw")

[node name="ReadMe" type="RichTextLabel" parent="IntroScreen"]
clip_contents = false
layout_mode = 2
bbcode_enabled = true
script = ExtResource("2_5vw27")
h1 = SubResource("Resource_vivmo")
h2 = SubResource("Resource_2cqfq")
h3 = SubResource("Resource_yaehf")
h4 = SubResource("Resource_074og")
h5 = SubResource("Resource_cegan")
h6 = SubResource("Resource_82xsv")

[node name="GameOver" parent="." instance=ExtResource("19_ryguw")]

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = ExtResource("19_82xsv")
volume_db = -18.0
autoplay = true

[node name="HeartBeat" type="AudioStreamPlayer" parent="."]
stream = ExtResource("19_cegan")
volume_db = -19.378
autoplay = true
script = ExtResource("21_getpj")
